<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Utilities for manipulating the primary selection"><title>smithay::wayland::selection::primary_selection - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2"href="../../../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../../../static.files/rustdoc-e56847b5.css"><meta name="rustdoc-vars" data-root-path="../../../../" data-static-root-path="../../../../static.files/" data-current-crate="smithay" data-themes="" data-resource-suffix="" data-rustdoc-version="1.92.0-nightly (7ac0330c6 2025-09-25)" data-channel="nightly" data-search-js="search-e256b49e.js" data-stringdex-js="stringdex-061df703.js" data-settings-js="settings-c38705f0.js" ><script src="../../../../static.files/storage-e2aeef58.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../../../static.files/main-ce535bd0.js"></script><noscript><link rel="stylesheet" href="../../../../static.files/noscript-263c88ec.css"></noscript><link rel="alternate icon" type="image/png" href="../../../../static.files/favicon-32x32-eab170b8.png"><link rel="icon" type="image/svg+xml" href="../../../../static.files/favicon-044be391.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><rustdoc-topbar><h2><a href="#">Module primary_selection</a></h2></rustdoc-topbar><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../../../smithay/index.html">smithay</a><span class="version">0.7.0</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Module primary_<wbr>selection</a></h2><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#initialization" title="Initialization">Initialization</a></li></ul><h3><a href="#structs">Module Items</a></h3><ul class="block"><li><a href="#structs" title="Structs">Structs</a></li><li><a href="#enums" title="Enums">Enums</a></li><li><a href="#traits" title="Traits">Traits</a></li><li><a href="#functions" title="Functions">Functions</a></li></ul></section><div id="rustdoc-modnav"><h2><a href="../index.html">In smithay::<wbr>wayland::<wbr>selection</a></h2></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../../../index.html">smithay</a>::<wbr><a href="../../index.html">wayland</a>::<wbr><a href="../index.html">selection</a></div><h1>Module <span>primary_<wbr>selection</span>&nbsp;<button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../../../src/smithay/wayland/selection/primary_selection/mod.rs.html#1-421">Source</a> </span></div><span class="item-info"><div class="stab portability">Available on <strong>crate feature <code>wayland_frontend</code></strong> only.</div></span><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Utilities for manipulating the primary selection</p>
<p>The primary selection is an additional protocol modeled after the data device to represent
and additional selection (copy/paste), a concept taken from the X11 Server.
This primary selection is a shortcut to the common clipboard selection,
where text just needs to be selected in order to allow copying it elsewhere
The de facto way to perform this action is the middle mouse button, although it is not limited to this one.</p>
<p>This module provides the freestanding <a href="fn.set_primary_focus.html" title="fn smithay::wayland::selection::primary_selection::set_primary_focus"><code>set_primary_focus</code></a> function:
This function sets the data device focus for a given seat; you’d typically call it
whenever the keyboard focus changes, to follow it (for example in the focus hook of your keyboards).</p>
<p>The module also provides an additional mechanism allowing your compositor to see and interact with
the contents of the primary selection:</p>
<ul>
<li>the freestanding function <a href="fn.set_primary_selection.html" title="fn smithay::wayland::selection::primary_selection::set_primary_selection"><code>set_primary_selection</code></a>
allows you to set the contents of the selection for your clients</li>
<li>the <code>PrimarySelectionHandle</code> gives you the option to inspect new selections
by overriding <a href="../trait.SelectionHandler.html#method.new_selection" title="method smithay::wayland::selection::SelectionHandler::new_selection"><code>SelectionHandler::new_selection</code></a>.</li>
</ul>
<h3 id="initialization"><a class="doc-anchor" href="#initialization">§</a>Initialization</h3>
<p>To initialize this implementation, create the <a href="struct.PrimarySelectionState.html" title="struct smithay::wayland::selection::primary_selection::PrimarySelectionState"><code>PrimarySelectionState</code></a>, store it inside your <code>State</code> struct
and implement the <a href="trait.PrimarySelectionHandler.html" title="trait smithay::wayland::selection::primary_selection::PrimarySelectionHandler"><code>PrimarySelectionHandler</code></a> and <a href="../trait.SelectionHandler.html" title="trait smithay::wayland::selection::SelectionHandler"><code>SelectionHandler</code></a>, as shown in this example:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>smithay::delegate_primary_selection;
<span class="kw">use </span>smithay::wayland::selection::SelectionHandler;
<span class="kw">use </span>smithay::wayland::selection::primary_selection::{PrimarySelectionState, PrimarySelectionHandler};

<span class="comment">// Create the primary_selection state
</span><span class="kw">let </span>primary_selection_state = PrimarySelectionState::new::&lt;State&gt;(
    <span class="kw-2">&amp;</span>display.handle(),
);

<span class="comment">// insert the PrimarySelectionState into your state
// ..

// implement the necessary traits
</span><span class="kw">impl </span>SelectionHandler <span class="kw">for </span>State {
    <span class="kw">type </span>SelectionUserData = ();
}
<span class="kw">impl </span>PrimarySelectionHandler <span class="kw">for </span>State {
    <span class="kw">fn </span>primary_selection_state(<span class="kw-2">&amp;mut </span><span class="self">self</span>) -&gt; <span class="kw-2">&amp;mut </span>PrimarySelectionState { <span class="kw-2">&amp;mut </span><span class="self">self</span>.primary_selection_state }
    <span class="comment">// ... override default implementations here to customize handling ...
</span>}
<span class="macro">delegate_primary_selection!</span>(State);

<span class="comment">// You're now ready to go!</span></code></pre></div></div></details><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><dl class="item-table"><dt><a class="struct" href="struct.PrimarySelectionState.html" title="struct smithay::wayland::selection::primary_selection::PrimarySelectionState">Primary<wbr>Selection<wbr>State</a></dt><dd>State of the primary selection.</dd><dt><a class="struct" href="struct.SourceMetadata.html" title="struct smithay::wayland::selection::primary_selection::SourceMetadata">Source<wbr>Metadata</a></dt><dd>The metadata describing a data source</dd></dl><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">§</a></h2><dl class="item-table"><dt><a class="enum" href="enum.SelectionRequestError.html" title="enum smithay::wayland::selection::primary_selection::SelectionRequestError">Selection<wbr>Request<wbr>Error</a></dt><dd>Errors happening when requesting selection contents</dd></dl><h2 id="traits" class="section-header">Traits<a href="#traits" class="anchor">§</a></h2><dl class="item-table"><dt><a class="trait" href="trait.PrimarySelectionHandler.html" title="trait smithay::wayland::selection::primary_selection::PrimarySelectionHandler">Primary<wbr>Selection<wbr>Handler</a></dt><dd>Access the primary selection state.</dd></dl><h2 id="functions" class="section-header">Functions<a href="#functions" class="anchor">§</a></h2><dl class="item-table"><dt><a class="fn" href="fn.clear_primary_selection.html" title="fn smithay::wayland::selection::primary_selection::clear_primary_selection">clear_<wbr>primary_<wbr>selection</a></dt><dd>Clear the current selection for this seat</dd><dt><a class="fn" href="fn.current_primary_selection_userdata.html" title="fn smithay::wayland::selection::primary_selection::current_primary_selection_userdata">current_<wbr>primary_<wbr>selection_<wbr>userdata</a></dt><dd>Gets the user_data for the currently active selection, if set by the compositor</dd><dt><a class="fn" href="fn.request_primary_client_selection.html" title="fn smithay::wayland::selection::primary_selection::request_primary_client_selection">request_<wbr>primary_<wbr>client_<wbr>selection</a></dt><dd>Request the current primary selection of the given seat
to be written to the provided file descriptor with the given mime type.</dd><dt><a class="fn" href="fn.set_primary_focus.html" title="fn smithay::wayland::selection::primary_selection::set_primary_focus">set_<wbr>primary_<wbr>focus</a></dt><dd>Set the primary selection focus to a certain client for a given seat</dd><dt><a class="fn" href="fn.set_primary_selection.html" title="fn smithay::wayland::selection::primary_selection::set_primary_selection">set_<wbr>primary_<wbr>selection</a></dt><dd>Set a compositor-provided primary selection for this seat</dd></dl></section></div></main></body></html>