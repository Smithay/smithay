<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Desktop management helpers"><title>smithay::desktop - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2"href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../static.files/rustdoc-e56847b5.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="smithay" data-themes="" data-resource-suffix="" data-rustdoc-version="1.92.0-nightly (7ac0330c6 2025-09-25)" data-channel="nightly" data-search-js="search-e256b49e.js" data-stringdex-js="stringdex-061df703.js" data-settings-js="settings-c38705f0.js" ><script src="../../static.files/storage-e2aeef58.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../static.files/main-ce535bd0.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-263c88ec.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-eab170b8.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-044be391.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><rustdoc-topbar><h2><a href="#">Module desktop</a></h2></rustdoc-topbar><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../smithay/index.html">smithay</a><span class="version">0.7.0</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Module desktop</a></h2><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#helpers" title="Helpers">Helpers</a><ul><li><a href="#window" title="`Window`"><code>Window</code></a></li><li><a href="#space" title="`Space`"><code>Space</code></a></li><li><a href="#layer-shell" title="Layer Shell">Layer Shell</a></li><li><a href="#popups" title="Popups">Popups</a></li></ul></li><li><a href="#remarks" title="Remarks">Remarks</a></li></ul><h3><a href="#reexports">Module Items</a></h3><ul class="block"><li><a href="#reexports" title="Re-exports">Re-exports</a></li><li><a href="#modules" title="Modules">Modules</a></li><li><a href="#structs" title="Structs">Structs</a></li><li><a href="#enums" title="Enums">Enums</a></li><li><a href="#functions" title="Functions">Functions</a></li></ul></section><div id="rustdoc-modnav"><h2 class="in-crate"><a href="../index.html">In crate smithay</a></h2></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../index.html">smithay</a></div><h1>Module <span>desktop</span>&nbsp;<button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../src/smithay/desktop/mod.rs.html#1-68">Source</a> </span></div><span class="item-info"><div class="stab portability">Available on <strong>crate feature <code>desktop</code></strong> only.</div></span><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Desktop management helpers</p>
<p>This module contains helpers to organize and interact with desktop-style shells.</p>
<p>It is therefore a lot more opinionated than for example the <a href="../wayland/shell/xdg/trait.XdgShellHandler.html" title="trait smithay::wayland::shell::xdg::XdgShellHandler">xdg-shell handler</a>
and tightly integrates with some protocols (e.g. xdg-shell).</p>
<p>The usage of this module is therefor entirely optional and depending on your use-case you might also only want
to use a limited set of the helpers provided.</p>
<h3 id="helpers"><a class="doc-anchor" href="#helpers">§</a>Helpers</h3><h4 id="window"><a class="doc-anchor" href="#window">§</a><a href="struct.Window.html" title="struct smithay::desktop::Window"><code>Window</code></a></h4>
<p>A window represents what is typically understood by the end-user as a single application window.</p>
<p>Currently it abstracts over xdg-shell toplevels and Xwayland surfaces.
It provides a bunch of methods to calculate and retrieve its size, manage itself, attach additional user_data
as well as a <a href="../backend/renderer/element/trait.AsRenderElements.html#tymethod.render_elements" title="method smithay::backend::renderer::element::AsRenderElements::render_elements">drawing function</a> to ease rendering it’s related surfaces.</p>
<p>Note that a <a href="struct.Window.html" title="struct smithay::desktop::Window"><code>Window</code></a> on it’s own has no position. For that it needs to be placed inside a <a href="space/struct.Space.html" title="struct smithay::desktop::space::Space"><code>Space</code></a>.</p>
<h4 id="space"><a class="doc-anchor" href="#space">§</a><a href="space/struct.Space.html" title="struct smithay::desktop::space::Space"><code>Space</code></a></h4>
<p>A space represents a two-dimensional plane of undefined dimensions.
<a href="struct.Window.html" title="struct smithay::desktop::Window"><code>Window</code></a>s (and other types implementing <a href="space/trait.SpaceElement.html" title="trait smithay::desktop::space::SpaceElement"><code>SpaceElement</code></a>) and <a href="../output/struct.Output.html" title="struct smithay::output::Output"><code>Output</code></a>s can be mapped onto it.</p>
<p>Elements get a position and stacking order through mapping. Outputs become views of a part of the <a href="space/struct.Space.html" title="struct smithay::desktop::space::Space"><code>Space</code></a>
and can be rendered via <a href="space/fn.render_output.html" title="fn smithay::desktop::space::render_output"><code>render_output</code></a>.</p>
<h4 id="layer-shell"><a class="doc-anchor" href="#layer-shell">§</a>Layer Shell</h4>
<p>A <a href="struct.LayerSurface.html" title="struct smithay::desktop::LayerSurface"><code>LayerSurface</code></a> represents a surface as provided by e.g. the layer-shell protocol.
It provides similar helper methods as a <a href="struct.Window.html" title="struct smithay::desktop::Window"><code>Window</code></a> does to toplevel surfaces.</p>
<p>Each <a href="../output/struct.Output.html" title="struct smithay::output::Output"><code>Output</code></a> can be associated a <a href="struct.LayerMap.html" title="struct smithay::desktop::LayerMap"><code>LayerMap</code></a> by calling <a href="fn.layer_map_for_output.html" title="fn smithay::desktop::layer_map_for_output"><code>layer_map_for_output</code></a>,
which <a href="struct.LayerSurface.html" title="struct smithay::desktop::LayerSurface"><code>LayerSurface</code></a>s can be mapped upon. Associated layer maps are automatically rendered by <a href="space/fn.render_output.html" title="fn smithay::desktop::space::render_output"><code>render_output</code></a>,
but a <a href="../backend/renderer/element/trait.AsRenderElements.html#tymethod.render_elements" title="method smithay::backend::renderer::element::AsRenderElements::render_elements">draw function</a> is also provided for manual layer-surface management.</p>
<h4 id="popups"><a class="doc-anchor" href="#popups">§</a>Popups</h4>
<p>Provides a <a href="struct.PopupManager.html" title="struct smithay::desktop::PopupManager"><code>PopupManager</code></a>, which can be used to automatically keep track of popups and their
relations to one-another. Popups are then automatically rendered with their matching toplevel surfaces,
when either <a href="../backend/renderer/element/trait.AsRenderElements.html#tymethod.render_elements" title="method smithay::backend::renderer::element::AsRenderElements::render_elements"><code>crate::backend::renderer::element::AsRenderElements::render_elements</code></a> or <a href="space/fn.render_output.html" title="fn smithay::desktop::space::render_output"><code>render_output</code></a> is called.</p>
<h3 id="remarks"><a class="doc-anchor" href="#remarks">§</a>Remarks</h3>
<p>Note that the desktop abstractions are concerned with easing rendering different clients and therefore need to be able
to manage client buffers to do so. If you plan to use the provided drawing functions, you need to use
<a href="../backend/renderer/utils/fn.on_commit_buffer_handler.html" title="fn smithay::backend::renderer::utils::on_commit_buffer_handler"><code>on_commit_buffer_handler</code></a>.</p>
</div></details><h2 id="reexports" class="section-header">Re-exports<a href="#reexports" class="anchor">§</a></h2><dl class="item-table reexports"><dt id="reexport.Space"><code>pub use self::space::<a class="struct" href="space/struct.Space.html" title="struct smithay::desktop::space::Space">Space</a>;</code></dt></dl><h2 id="modules" class="section-header">Modules<a href="#modules" class="anchor">§</a></h2><dl class="item-table"><dt><a class="mod" href="space/index.html" title="mod smithay::desktop::space">space</a></dt><dd>This module contains the <a href="space/struct.Space.html" title="struct smithay::desktop::space::Space"><code>Space</code></a> helper class as well has related
rendering helpers to add custom elements or different clients to a space.</dd><dt><a class="mod" href="utils/index.html" title="mod smithay::desktop::utils">utils</a><wbr><span class="stab portability" title="Available on crate feature `wayland_frontend` only"><code>wayland_frontend</code></span></dt><dd>Helper functions to ease dealing with surface trees</dd></dl><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><dl class="item-table"><dt><a class="struct" href="struct.LayerMap.html" title="struct smithay::desktop::LayerMap">Layer<wbr>Map</a><wbr><span class="stab portability" title="Available on crate feature `wayland_frontend` only"><code>wayland_frontend</code></span></dt><dd>Map of <a href="struct.LayerSurface.html" title="struct smithay::desktop::LayerSurface"><code>LayerSurface</code></a>s on an <a href="../output/struct.Output.html" title="struct smithay::output::Output"><code>Output</code></a></dd><dt><a class="struct" href="struct.LayerSurface.html" title="struct smithay::desktop::LayerSurface">Layer<wbr>Surface</a><wbr><span class="stab portability" title="Available on crate feature `wayland_frontend` only"><code>wayland_frontend</code></span></dt><dd>A <a href="struct.LayerSurface.html" title="struct smithay::desktop::LayerSurface"><code>LayerSurface</code></a> represents a single layer surface as given by the wlr-layer-shell protocol.</dd><dt><a class="struct" href="struct.PopupGrab.html" title="struct smithay::desktop::PopupGrab">Popup<wbr>Grab</a><wbr><span class="stab portability" title="Available on crate feature `wayland_frontend` only"><code>wayland_frontend</code></span></dt><dd>Represents the explicit grab a client requested for a popup</dd><dt><a class="struct" href="struct.PopupKeyboardGrab.html" title="struct smithay::desktop::PopupKeyboardGrab">Popup<wbr>Keyboard<wbr>Grab</a><wbr><span class="stab portability" title="Available on crate feature `wayland_frontend` only"><code>wayland_frontend</code></span></dt><dd>Default implementation of a <a href="../input/keyboard/trait.KeyboardGrab.html" title="trait smithay::input::keyboard::KeyboardGrab"><code>KeyboardGrab</code></a> for <a href="struct.PopupGrab.html" title="struct smithay::desktop::PopupGrab"><code>PopupGrab</code></a></dd><dt><a class="struct" href="struct.PopupManager.html" title="struct smithay::desktop::PopupManager">Popup<wbr>Manager</a><wbr><span class="stab portability" title="Available on crate feature `wayland_frontend` only"><code>wayland_frontend</code></span></dt><dd>Helper to track popups.</dd><dt><a class="struct" href="struct.PopupPointerGrab.html" title="struct smithay::desktop::PopupPointerGrab">Popup<wbr>Pointer<wbr>Grab</a><wbr><span class="stab portability" title="Available on crate feature `wayland_frontend` only"><code>wayland_frontend</code></span></dt><dd>Default implementation of a <a href="../input/pointer/trait.PointerGrab.html" title="trait smithay::input::pointer::PointerGrab"><code>PointerGrab</code></a> for <a href="struct.PopupGrab.html" title="struct smithay::desktop::PopupGrab"><code>PopupGrab</code></a></dd><dt><a class="struct" href="struct.WeakWindow.html" title="struct smithay::desktop::WeakWindow">Weak<wbr>Window</a><wbr><span class="stab portability" title="Available on crate feature `wayland_frontend` only"><code>wayland_frontend</code></span></dt><dd>A weak reference to a <a href="struct.Window.html" title="struct smithay::desktop::Window"><code>Window</code></a> that does not keep it alive.</dd><dt><a class="struct" href="struct.Window.html" title="struct smithay::desktop::Window">Window</a><wbr><span class="stab portability" title="Available on crate feature `wayland_frontend` only"><code>wayland_frontend</code></span></dt><dd>Represents a single application window</dd><dt><a class="struct" href="struct.WindowSurfaceType.html" title="struct smithay::desktop::WindowSurfaceType">Window<wbr>Surface<wbr>Type</a><wbr><span class="stab portability" title="Available on crate feature `wayland_frontend` only"><code>wayland_frontend</code></span></dt><dd>Defines the surface types that can be
queried with <a href="struct.Window.html#method.surface_under" title="method smithay::desktop::Window::surface_under"><code>Window::surface_under</code></a></dd></dl><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">§</a></h2><dl class="item-table"><dt><a class="enum" href="enum.PopupGrabError.html" title="enum smithay::desktop::PopupGrabError">Popup<wbr>Grab<wbr>Error</a><wbr><span class="stab portability" title="Available on crate feature `wayland_frontend` only"><code>wayland_frontend</code></span></dt><dd>Defines the possible errors that
can be returned from <a href="struct.PopupManager.html#method.grab_popup" title="method smithay::desktop::PopupManager::grab_popup"><code>PopupManager::grab_popup</code></a></dd><dt><a class="enum" href="enum.PopupKind.html" title="enum smithay::desktop::PopupKind">Popup<wbr>Kind</a><wbr><span class="stab portability" title="Available on crate feature `wayland_frontend` only"><code>wayland_frontend</code></span></dt><dd>Represents a popup surface</dd><dt><a class="enum" href="enum.PopupUngrabStrategy.html" title="enum smithay::desktop::PopupUngrabStrategy">Popup<wbr>Ungrab<wbr>Strategy</a><wbr><span class="stab portability" title="Available on crate feature `wayland_frontend` only"><code>wayland_frontend</code></span></dt><dd>Defines the possibly strategies
for the <a href="struct.PopupGrab.html#method.ungrab" title="method smithay::desktop::PopupGrab::ungrab"><code>PopupGrab::ungrab</code></a> operation</dd><dt><a class="enum" href="enum.WindowSurface.html" title="enum smithay::desktop::WindowSurface">Window<wbr>Surface</a><wbr><span class="stab portability" title="Available on crate feature `wayland_frontend` only"><code>wayland_frontend</code></span></dt><dd>Represents the surface of a <a href="struct.Window.html" title="struct smithay::desktop::Window"><code>Window</code></a></dd></dl><h2 id="functions" class="section-header">Functions<a href="#functions" class="anchor">§</a></h2><dl class="item-table"><dt><a class="fn" href="fn.find_popup_root_surface.html" title="fn smithay::desktop::find_popup_root_surface">find_<wbr>popup_<wbr>root_<wbr>surface</a><wbr><span class="stab portability" title="Available on crate feature `wayland_frontend` only"><code>wayland_frontend</code></span></dt><dd>Finds the toplevel wl_surface this popup belongs to.</dd><dt><a class="fn" href="fn.get_popup_toplevel_coords.html" title="fn smithay::desktop::get_popup_toplevel_coords">get_<wbr>popup_<wbr>toplevel_<wbr>coords</a><wbr><span class="stab portability" title="Available on crate feature `wayland_frontend` only"><code>wayland_frontend</code></span></dt><dd>Computes this popup’s location relative to its toplevel wl_surface’s geometry.</dd><dt><a class="fn" href="fn.layer_map_for_output.html" title="fn smithay::desktop::layer_map_for_output">layer_<wbr>map_<wbr>for_<wbr>output</a><wbr><span class="stab portability" title="Available on crate feature `wayland_frontend` only"><code>wayland_frontend</code></span></dt><dd>Retrieve a <a href="struct.LayerMap.html" title="struct smithay::desktop::LayerMap"><code>LayerMap</code></a> for a given <a href="../output/struct.Output.html" title="struct smithay::output::Output"><code>Output</code></a>.</dd></dl></section></div></main></body></html>