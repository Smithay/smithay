<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Interface for interacting with the Wayland protocol, server-side."><title>wayland_server - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2"href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../static.files/rustdoc-e56847b5.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="wayland_server" data-themes="" data-resource-suffix="" data-rustdoc-version="1.92.0-nightly (7ac0330c6 2025-09-25)" data-channel="nightly" data-search-js="search-e256b49e.js" data-stringdex-js="stringdex-061df703.js" data-settings-js="settings-c38705f0.js" ><script src="../static.files/storage-e2aeef58.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-ce535bd0.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-263c88ec.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-eab170b8.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-044be391.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><rustdoc-topbar><h2><a href="#">Crate wayland_server</a></h2></rustdoc-topbar><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../wayland_server/index.html">wayland_<wbr>server</a><span class="version">0.31.10</span></h2></div><div class="sidebar-elems"><ul class="block"><li><a id="all-types" href="all.html">All Items</a></li></ul><section id="rustdoc-toc"><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#general-concepts" title="General concepts">General concepts</a></li><li><a href="#request-dispatching-and-the-dispatch-trait" title="Request dispatching and the `Dispatch` trait">Request dispatching and the <code>Dispatch</code> trait</a></li><li><a href="#globals" title="Globals">Globals</a></li><li><a href="#logging" title="Logging">Logging</a></li><li><a href="#advanced-use" title="Advanced use">Advanced use</a><ul><li><a href="#bypassing-dispatch" title="Bypassing `Dispatch`">Bypassing <code>Dispatch</code></a></li><li><a href="#interaction-with-ffi" title="Interaction with FFI">Interaction with FFI</a></li></ul></li></ul><h3><a href="#modules">Crate Items</a></h3><ul class="block"><li><a href="#modules" title="Modules">Modules</a></li><li><a href="#macros" title="Macros">Macros</a></li><li><a href="#structs" title="Structs">Structs</a></li><li><a href="#enums" title="Enums">Enums</a></li><li><a href="#traits" title="Traits">Traits</a></li></ul></section><div id="rustdoc-modnav"></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><section id="main-content" class="content"><div class="main-heading"><h1>Crate <span>wayland_<wbr>server</span>&nbsp;<button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../src/wayland_server/lib.rs.html#1-339">Source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Interface for interacting with the Wayland protocol, server-side.</p>
<h3 id="general-concepts"><a class="doc-anchor" href="#general-concepts">§</a>General concepts</h3>
<p>This crate is structured around four main objects: the <a href="struct.Display.html" title="struct wayland_server::Display"><code>Display</code></a> and <a href="struct.DisplayHandle.html" title="struct wayland_server::DisplayHandle"><code>DisplayHandle</code></a> structs,
resources (objects implementing the <a href="trait.Resource.html" title="trait wayland_server::Resource"><code>Resource</code></a> trait), and the <a href="trait.Dispatch.html" title="trait wayland_server::Dispatch"><code>Dispatch</code></a> trait.</p>
<p>The <a href="struct.Display.html" title="struct wayland_server::Display"><code>Display</code></a> is the heart of this crate, it represents the protocol state of your Wayland server, and
takes care of processing messages from clients. You’ll need to integrate it in your event loop (see its
documentation for details). From it you can retrieve the <a href="struct.DisplayHandle.html" title="struct wayland_server::DisplayHandle"><code>DisplayHandle</code></a>, which is a clonable handle to
the Wayland state and is the type used to actually interact with the protocol.</p>
<p>Each of the Wayland object you can manipulate is represented by a struct implementing the <a href="trait.Resource.html" title="trait wayland_server::Resource"><code>Resource</code></a>
trait. Thos structs are automatically generated from the wayland XML protocol specification. This crate
provides the types generated from the core protocol in the <a href="protocol/index.html" title="mod wayland_server::protocol"><code>protocol</code></a> module. For other standard
protocols, see the <code>wayland-protocols</code> crate.</p>
<h3 id="request-dispatching-and-the-dispatch-trait"><a class="doc-anchor" href="#request-dispatching-and-the-dispatch-trait">§</a>Request dispatching and the <a href="trait.Dispatch.html" title="trait wayland_server::Dispatch"><code>Dispatch</code></a> trait</h3>
<p>The request dispatching logic provided by this crate is build around the <a href="trait.Dispatch.html" title="trait wayland_server::Dispatch"><code>Dispatch</code></a> trait. During the
dispatching process (in <a href="struct.Display.html#method.dispatch_clients" title="method wayland_server::Display::dispatch_clients"><code>Display::dispatch_clients()</code></a>), all requests sent by clients are read from
their respective process and delivered to your processing logic, by invoking methods on the various
<a href="trait.Dispatch.html" title="trait wayland_server::Dispatch"><code>Dispatch</code></a> implementations of your <code>State</code> struct. In this paradigm, your <code>State</code> needs to implement
<code>Dispatch&lt;O, _&gt;</code> for every Wayland object <code>O</code> it needs to process events for.</p>
<p>However, implementing all those traits on your own is a lot of (often uninteresting) work. To make this
easier a composition mechanism is provided using the <a href="macro.delegate_dispatch.html" title="macro wayland_server::delegate_dispatch"><code>delegate_dispatch!()</code></a> macro. This way, another
library (such as Smithay) can provide generic <a href="trait.Dispatch.html" title="trait wayland_server::Dispatch"><code>Dispatch</code></a> implementations that you can reuse on your
own app by delegating those objects to that provided implementation. See the documentation of those
traits and macro for details.</p>
<h3 id="globals"><a class="doc-anchor" href="#globals">§</a>Globals</h3>
<p>The entry point of the protocol for clients goes through the protocol globals. Each global represents a
capability of your compositor, a peripheral it has access to, or a protocol extension it supports.
Globals are created by you using <a href="struct.DisplayHandle.html#method.create_global" title="method wayland_server::DisplayHandle::create_global"><code>DisplayHandle::create_global()</code></a>, and require your <code>State</code> to
implement the <a href="trait.GlobalDispatch.html" title="trait wayland_server::GlobalDispatch"><code>GlobalDispatch</code></a> trait for the interface associated with that global.</p>
<h3 id="logging"><a class="doc-anchor" href="#logging">§</a>Logging</h3>
<p>This crate can generate some runtime error message (notably when a protocol error occurs). By default
those messages are printed to stderr. If you activate the <code>log</code> cargo feature, they will instead be
piped through the <code>log</code> crate.</p>
<h3 id="advanced-use"><a class="doc-anchor" href="#advanced-use">§</a>Advanced use</h3><h4 id="bypassing-dispatch"><a class="doc-anchor" href="#bypassing-dispatch">§</a>Bypassing <a href="trait.Dispatch.html" title="trait wayland_server::Dispatch"><code>Dispatch</code></a></h4>
<p>It may be that for some of your objects, handling them via the <a href="trait.Dispatch.html" title="trait wayland_server::Dispatch"><code>Dispatch</code></a> trait is impractical. In
those contexts, this crate also provides some escape-hatches to directly interface with the low-level
APIs from <code>wayland-backend</code>, allowing you to register callbacks for those objects by directly providing
implementations of the backend <a href="backend/trait.ObjectData.html" title="trait wayland_server::backend::ObjectData"><code>ObjectData</code></a> trait.
See <a href="struct.Client.html#method.create_resource_from_objdata" title="method wayland_server::Client::create_resource_from_objdata"><code>Client::create_resource_from_objdata()</code></a> and <a href="struct.DataInit.html#method.custom_init" title="method wayland_server::DataInit::custom_init"><code>DataInit::custom_init()</code></a>.</p>
<h4 id="interaction-with-ffi"><a class="doc-anchor" href="#interaction-with-ffi">§</a>Interaction with FFI</h4>
<p>It can happen that you’ll need to interact with Wayland states accross FFI, such as for example when
interfacing with the graphics stack for enabling hardware acceleration for clients.</p>
<p>In this case, you’ll need to do it in two steps, by explicitly working with <code>wayland-backend</code>, adding
it to your dependencies and enabling its <code>server_system</code> feature.</p>
<p>Then, you’ll generally need:</p>
<ul>
<li>The <code>*mut wl_display</code> pointer, that you can retrieve by first retrieving the
<a href="backend/struct.Backend.html" title="struct wayland_server::backend::Backend"><code>Backend</code></a> using <a href="struct.Display.html#method.backend" title="method wayland_server::Display::backend"><code>Display::backend()</code></a>, and then invoke
<a href="backend/struct.Backend.html#method.handle" title="method wayland_server::backend::Backend::handle"><code>.handle()</code></a><a href="backend/struct.Handle.html#method.display_ptr" title="method wayland_server::backend::Handle::display_ptr"><code>.display_ptr()</code></a>.</li>
<li>The <code>*mut wl_resource</code> pointers for the objects you need to share, by first getting the
<a href="backend/struct.ObjectId.html" title="struct wayland_server::backend::ObjectId"><code>ObjectId</code></a> using the <a href="trait.Resource.html#tymethod.id" title="method wayland_server::Resource::id"><code>Resource::id()</code></a> method, and then
the <a href="backend/struct.ObjectId.html#method.as_ptr" title="method wayland_server::backend::ObjectId::as_ptr"><code>ObjectId::as_ptr()</code></a> method.</li>
</ul>
<p>If you need to receive pointers from FFI, you can make <a href="backend/struct.ObjectId.html" title="struct wayland_server::backend::ObjectId"><code>ObjectId</code></a>s from the <code>*mut wl_resource</code> pointers
using <a href="backend/struct.ObjectId.html#method.from_ptr" title="associated function wayland_server::backend::ObjectId::from_ptr"><code>ObjectId::from_ptr()</code></a>, and then make the resources using <a href="trait.Resource.html#tymethod.from_id" title="associated function wayland_server::Resource::from_id"><code>Resource::from_id()</code></a>.</p>
</div></details><h2 id="modules" class="section-header">Modules<a href="#modules" class="anchor">§</a></h2><dl class="item-table"><dt><a class="mod" href="backend/index.html" title="mod wayland_server::backend">backend</a></dt><dd>Backend reexports</dd><dt><a class="mod" href="protocol/index.html" title="mod wayland_server::protocol">protocol</a></dt><dd>Generated protocol definitions</dd></dl><h2 id="macros" class="section-header">Macros<a href="#macros" class="anchor">§</a></h2><dl class="item-table"><dt><a class="macro" href="macro.delegate_dispatch.html" title="macro wayland_server::delegate_dispatch">delegate_<wbr>dispatch</a></dt><dd>A helper macro which delegates a set of <a href="trait.Dispatch.html" title="trait wayland_server::Dispatch"><code>Dispatch</code></a> implementations for a resource to some other type which
provides a generic <a href="trait.Dispatch.html" title="trait wayland_server::Dispatch"><code>Dispatch</code></a> implementation.</dd><dt><a class="macro" href="macro.delegate_global_dispatch.html" title="macro wayland_server::delegate_global_dispatch">delegate_<wbr>global_<wbr>dispatch</a></dt><dd>A helper macro which delegates a set of <a href="trait.GlobalDispatch.html" title="trait wayland_server::GlobalDispatch"><code>GlobalDispatch</code></a> implementations for a resource to some other type which
provdes a generic <a href="trait.GlobalDispatch.html" title="trait wayland_server::GlobalDispatch"><code>GlobalDispatch</code></a> implementation.</dd></dl><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><dl class="item-table"><dt><a class="struct" href="struct.Client.html" title="struct wayland_server::Client">Client</a></dt><dd>A struct representing a Wayland client connected to your compositor.</dd><dt><a class="struct" href="struct.DataInit.html" title="struct wayland_server::DataInit">Data<wbr>Init</a></dt><dd>Helper to initialize client-created objects</dd><dt><a class="struct" href="struct.Display.html" title="struct wayland_server::Display">Display</a></dt><dd>The Wayland display</dd><dt><a class="struct" href="struct.DisplayHandle.html" title="struct wayland_server::DisplayHandle">Display<wbr>Handle</a></dt><dd>A handle to the Wayland display</dd><dt><a class="struct" href="struct.ListeningSocket.html" title="struct wayland_server::ListeningSocket">Listening<wbr>Socket</a></dt><dd>An utility representing a unix socket on which your compositor is listening for new clients</dd><dt><a class="struct" href="struct.New.html" title="struct wayland_server::New">New</a></dt><dd>A newly created object that needs to be initialized. See <a href="struct.DataInit.html" title="struct wayland_server::DataInit"><code>DataInit</code></a>.</dd><dt><a class="struct" href="struct.ResourceData.html" title="struct wayland_server::ResourceData">Resource<wbr>Data</a></dt><dd>The <a href="backend/trait.ObjectData.html" title="trait wayland_server::backend::ObjectData"><code>ObjectData</code></a> implementation that is internally used by this crate</dd><dt><a class="struct" href="struct.Weak.html" title="struct wayland_server::Weak">Weak</a></dt><dd>A weak handle to a Wayland object</dd></dl><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">§</a></h2><dl class="item-table"><dt><a class="enum" href="enum.BindError.html" title="enum wayland_server::BindError">Bind<wbr>Error</a></dt><dd>Error that can occur when trying to bind a <a href="struct.ListeningSocket.html" title="struct wayland_server::ListeningSocket"><code>ListeningSocket</code></a></dd><dt><a class="enum" href="enum.DispatchError.html" title="enum wayland_server::DispatchError">Dispatch<wbr>Error</a></dt><dd>An error generated if an illegal request was received from a client</dd><dt><a class="enum" href="enum.WEnum.html" title="enum wayland_server::WEnum">WEnum</a></dt><dd>An enum value in the protocol.</dd></dl><h2 id="traits" class="section-header">Traits<a href="#traits" class="anchor">§</a></h2><dl class="item-table"><dt><a class="trait" href="trait.Dispatch.html" title="trait wayland_server::Dispatch">Dispatch</a></dt><dd>A trait which provides an implementation for handling a client’s requests from a resource with some type
of associated user data.</dd><dt><a class="trait" href="trait.GlobalDispatch.html" title="trait wayland_server::GlobalDispatch">Global<wbr>Dispatch</a></dt><dd>A trait which provides an implementation for handling advertisement of a global to clients with some type
of associated user data.</dd><dt><a class="trait" href="trait.Resource.html" title="trait wayland_server::Resource">Resource</a></dt><dd>Trait representing a Wayland interface</dd></dl></section></div></main></body></html>