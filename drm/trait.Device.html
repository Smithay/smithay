<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="This trait should be implemented by any object that acts as a DRM device. It is a prerequisite for using any DRM functionality."><title>Device in drm - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2"href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../static.files/rustdoc-e56847b5.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="drm" data-themes="" data-resource-suffix="" data-rustdoc-version="1.92.0-nightly (7ac0330c6 2025-09-25)" data-channel="nightly" data-search-js="search-e256b49e.js" data-stringdex-js="stringdex-061df703.js" data-settings-js="settings-c38705f0.js" ><script src="../static.files/storage-e2aeef58.js"></script><script defer src="sidebar-items.js"></script><script defer src="../static.files/main-ce535bd0.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-263c88ec.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-eab170b8.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-044be391.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><rustdoc-topbar><h2><a href="#">Device</a></h2></rustdoc-topbar><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../drm/index.html">drm</a><span class="version">0.14.2</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Device</a></h2><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#example" title="Example">Example</a></li></ul><h3><a href="#provided-methods">Provided Methods</a></h3><ul class="block"><li><a href="#method.acquire_master_lock" title="acquire_master_lock">acquire_master_lock</a></li><li><a href="#method.authenticate_auth_token" title="authenticate_auth_token">authenticate_auth_token</a></li><li><a href="#method.authenticated" title="authenticated">authenticated</a></li><li><a href="#method.generate_auth_token" title="generate_auth_token">generate_auth_token</a></li><li><a href="#method.get_bus_id" title="get_bus_id">get_bus_id</a></li><li><a href="#method.get_driver" title="get_driver">get_driver</a></li><li><a href="#method.get_driver_capability" title="get_driver_capability">get_driver_capability</a></li><li><a href="#method.release_master_lock" title="release_master_lock">release_master_lock</a></li><li><a href="#method.set_client_capability" title="set_client_capability">set_client_capability</a></li><li><a href="#method.wait_vblank" title="wait_vblank">wait_vblank</a></li></ul><h3><a href="#implementors">Implementors</a></h3></section><div id="rustdoc-modnav"><h2 class="in-crate"><a href="index.html">In crate drm</a></h2></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="index.html">drm</a></div><h1>Trait <span class="trait">Device</span>&nbsp;<button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../src/drm/lib.rs.html#97-229">Source</a> </span></div><pre class="rust item-decl"><code>pub trait Device: <a class="trait" href="https://doc.rust-lang.org/nightly/std/os/fd/owned/trait.AsFd.html" title="trait std::os::fd::owned::AsFd">AsFd</a> {
    // Provided methods
    fn <a href="#method.acquire_master_lock" class="fn">acquire_master_lock</a>(&amp;self) -&gt; <a class="type" href="https://doc.rust-lang.org/nightly/std/io/error/type.Result.html" title="type std::io::error::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt; { ... }
<span class="item-spacer"></span>    fn <a href="#method.release_master_lock" class="fn">release_master_lock</a>(&amp;self) -&gt; <a class="type" href="https://doc.rust-lang.org/nightly/std/io/error/type.Result.html" title="type std::io::error::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt; { ... }
<span class="item-spacer"></span>    fn <a href="#method.generate_auth_token" class="fn">generate_auth_token</a>(&amp;self) -&gt; <a class="type" href="https://doc.rust-lang.org/nightly/std/io/error/type.Result.html" title="type std::io::error::Result">Result</a>&lt;<a class="struct" href="struct.AuthToken.html" title="struct drm::AuthToken">AuthToken</a>&gt; { ... }
<span class="item-spacer"></span>    fn <a href="#method.authenticate_auth_token" class="fn">authenticate_auth_token</a>(&amp;self, token: <a class="struct" href="struct.AuthToken.html" title="struct drm::AuthToken">AuthToken</a>) -&gt; <a class="type" href="https://doc.rust-lang.org/nightly/std/io/error/type.Result.html" title="type std::io::error::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt; { ... }
<span class="item-spacer"></span>    fn <a href="#method.set_client_capability" class="fn">set_client_capability</a>(
        &amp;self,
        cap: <a class="enum" href="enum.ClientCapability.html" title="enum drm::ClientCapability">ClientCapability</a>,
        enable: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>,
    ) -&gt; <a class="type" href="https://doc.rust-lang.org/nightly/std/io/error/type.Result.html" title="type std::io::error::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt; { ... }
<span class="item-spacer"></span>    fn <a href="#method.get_bus_id" class="fn">get_bus_id</a>(&amp;self) -&gt; <a class="type" href="https://doc.rust-lang.org/nightly/std/io/error/type.Result.html" title="type std::io::error::Result">Result</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/std/ffi/os_str/struct.OsString.html" title="struct std::ffi::os_str::OsString">OsString</a>&gt; { ... }
<span class="item-spacer"></span>    fn <a href="#method.authenticated" class="fn">authenticated</a>(&amp;self) -&gt; <a class="type" href="https://doc.rust-lang.org/nightly/std/io/error/type.Result.html" title="type std::io::error::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>&gt; { ... }
<span class="item-spacer"></span>    fn <a href="#method.get_driver_capability" class="fn">get_driver_capability</a>(&amp;self, cap: <a class="enum" href="enum.DriverCapability.html" title="enum drm::DriverCapability">DriverCapability</a>) -&gt; <a class="type" href="https://doc.rust-lang.org/nightly/std/io/error/type.Result.html" title="type std::io::error::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u64.html">u64</a>&gt; { ... }
<span class="item-spacer"></span>    fn <a href="#method.get_driver" class="fn">get_driver</a>(&amp;self) -&gt; <a class="type" href="https://doc.rust-lang.org/nightly/std/io/error/type.Result.html" title="type std::io::error::Result">Result</a>&lt;<a class="struct" href="struct.Driver.html" title="struct drm::Driver">Driver</a>&gt; { ... }
<span class="item-spacer"></span>    fn <a href="#method.wait_vblank" class="fn">wait_vblank</a>(
        &amp;self,
        target_sequence: <a class="enum" href="enum.VblankWaitTarget.html" title="enum drm::VblankWaitTarget">VblankWaitTarget</a>,
        flags: <a class="struct" href="struct.VblankWaitFlags.html" title="struct drm::VblankWaitFlags">VblankWaitFlags</a>,
        high_crtc: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u32.html">u32</a>,
        user_data: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>,
    ) -&gt; <a class="type" href="https://doc.rust-lang.org/nightly/std/io/error/type.Result.html" title="type std::io::error::Result">Result</a>&lt;<a class="struct" href="struct.VblankWaitReply.html" title="struct drm::VblankWaitReply">VblankWaitReply</a>&gt; { ... }
}</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>This trait should be implemented by any object that acts as a DRM device. It
is a prerequisite for using any DRM functionality.</p>
<p>This crate does not provide a concrete device object due to the various ways
it can be implemented. The user of this crate is expected to implement it
themselves and derive this trait as necessary. The example below
demonstrates how to do this using a small wrapper.</p>
<h2 id="example"><a class="doc-anchor" href="#example">ยง</a>Example</h2>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>drm::Device;

<span class="kw">use </span>std::fs::File;
<span class="kw">use </span>std::fs::OpenOptions;

<span class="kw">use </span>std::os::unix::io::AsFd;
<span class="kw">use </span>std::os::unix::io::BorrowedFd;

<span class="attr">#[derive(Debug)]
</span><span class="doccomment">/// A simple wrapper for a device node.
</span><span class="kw">struct </span>Card(File);

<span class="doccomment">/// Implementing [`AsFd`] is a prerequisite to implementing the traits found
/// in this crate. Here, we are just calling [`File::as_fd()`] on the inner
/// [`File`].
</span><span class="kw">impl </span>AsFd <span class="kw">for </span>Card {
    <span class="kw">fn </span>as_fd(<span class="kw-2">&amp;</span><span class="self">self</span>) -&gt; BorrowedFd&lt;<span class="lifetime">'_</span>&gt; {
        <span class="self">self</span>.<span class="number">0</span>.as_fd()
    }
}

<span class="doccomment">/// With [`AsFd`] implemented, we can now implement [`drm::Device`].
</span><span class="kw">impl </span>Device <span class="kw">for </span>Card {}

<span class="kw">impl </span>Card {
    <span class="doccomment">/// Simple helper method for opening a [`Card`].
    </span><span class="kw">fn </span>open() -&gt; <span class="self">Self </span>{
        <span class="kw">let </span><span class="kw-2">mut </span>options = OpenOptions::new();
        options.read(<span class="bool-val">true</span>);
        options.write(<span class="bool-val">true</span>);

        <span class="comment">// The normal location of the primary device node on Linux
        </span>Card(options.open(<span class="string">"/dev/dri/card0"</span>).unwrap())
    }
}</code></pre></div></div></details><h2 id="provided-methods" class="section-header">Provided Methods<a href="#provided-methods" class="anchor">ยง</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="method.acquire_master_lock" class="method"><a class="src rightside" href="../src/drm/lib.rs.html#108-111">Source</a><h4 class="code-header">fn <a href="#method.acquire_master_lock" class="fn">acquire_master_lock</a>(&amp;self) -&gt; <a class="type" href="https://doc.rust-lang.org/nightly/std/io/error/type.Result.html" title="type std::io::error::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt;</h4></section></summary><div class="docblock"><p>Acquires the DRM Master lock for this process.</p>
<h5 id="notes"><a class="doc-anchor" href="#notes">ยง</a>Notes</h5>
<p>Acquiring the DRM Master is done automatically when the primary device
node is opened. If you opened the primary device node and did not
acquire the lock, another process likely has the lock.</p>
<p>This function is only available to processes with CAP_SYS_ADMIN
privileges (usually as root)</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.release_master_lock" class="method"><a class="src rightside" href="../src/drm/lib.rs.html#114-117">Source</a><h4 class="code-header">fn <a href="#method.release_master_lock" class="fn">release_master_lock</a>(&amp;self) -&gt; <a class="type" href="https://doc.rust-lang.org/nightly/std/io/error/type.Result.html" title="type std::io::error::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt;</h4></section></summary><div class="docblock"><p>Releases the DRM Master lock for another process to use.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.generate_auth_token" class="method"><a class="src rightside" href="../src/drm/lib.rs.html#121-124">Source</a><h4 class="code-header">fn <a href="#method.generate_auth_token" class="fn">generate_auth_token</a>(&amp;self) -&gt; <a class="type" href="https://doc.rust-lang.org/nightly/std/io/error/type.Result.html" title="type std::io::error::Result">Result</a>&lt;<a class="struct" href="struct.AuthToken.html" title="struct drm::AuthToken">AuthToken</a>&gt;</h4></section><span class="item-info"><div class="stab deprecated"><span class="emoji">๐</span><span>Deprecated: Consider opening a render node instead.</span></div></span></summary><div class="docblock"><p>Generates an <a href="struct.AuthToken.html" title="struct drm::AuthToken"><code>AuthToken</code></a> for this process.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.authenticate_auth_token" class="method"><a class="src rightside" href="../src/drm/lib.rs.html#127-130">Source</a><h4 class="code-header">fn <a href="#method.authenticate_auth_token" class="fn">authenticate_auth_token</a>(&amp;self, token: <a class="struct" href="struct.AuthToken.html" title="struct drm::AuthToken">AuthToken</a>) -&gt; <a class="type" href="https://doc.rust-lang.org/nightly/std/io/error/type.Result.html" title="type std::io::error::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt;</h4></section></summary><div class="docblock"><p>Authenticates an <a href="struct.AuthToken.html" title="struct drm::AuthToken"><code>AuthToken</code></a> from another process.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.set_client_capability" class="method"><a class="src rightside" href="../src/drm/lib.rs.html#134-137">Source</a><h4 class="code-header">fn <a href="#method.set_client_capability" class="fn">set_client_capability</a>(
    &amp;self,
    cap: <a class="enum" href="enum.ClientCapability.html" title="enum drm::ClientCapability">ClientCapability</a>,
    enable: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>,
) -&gt; <a class="type" href="https://doc.rust-lang.org/nightly/std/io/error/type.Result.html" title="type std::io::error::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt;</h4></section></summary><div class="docblock"><p>Requests the driver to expose or hide certain capabilities. See
<a href="enum.ClientCapability.html" title="enum drm::ClientCapability"><code>ClientCapability</code></a> for more information.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.get_bus_id" class="method"><a class="src rightside" href="../src/drm/lib.rs.html#140-146">Source</a><h4 class="code-header">fn <a href="#method.get_bus_id" class="fn">get_bus_id</a>(&amp;self) -&gt; <a class="type" href="https://doc.rust-lang.org/nightly/std/io/error/type.Result.html" title="type std::io::error::Result">Result</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/std/ffi/os_str/struct.OsString.html" title="struct std::ffi::os_str::OsString">OsString</a>&gt;</h4></section></summary><div class="docblock"><p>Gets the bus ID of this device.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.authenticated" class="method"><a class="src rightside" href="../src/drm/lib.rs.html#150-153">Source</a><h4 class="code-header">fn <a href="#method.authenticated" class="fn">authenticated</a>(&amp;self) -&gt; <a class="type" href="https://doc.rust-lang.org/nightly/std/io/error/type.Result.html" title="type std::io::error::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>&gt;</h4></section></summary><div class="docblock"><p>Check to see if our <a href="struct.AuthToken.html" title="struct drm::AuthToken"><code>AuthToken</code></a> has been authenticated
by the DRM Master</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.get_driver_capability" class="method"><a class="src rightside" href="../src/drm/lib.rs.html#156-159">Source</a><h4 class="code-header">fn <a href="#method.get_driver_capability" class="fn">get_driver_capability</a>(&amp;self, cap: <a class="enum" href="enum.DriverCapability.html" title="enum drm::DriverCapability">DriverCapability</a>) -&gt; <a class="type" href="https://doc.rust-lang.org/nightly/std/io/error/type.Result.html" title="type std::io::error::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u64.html">u64</a>&gt;</h4></section></summary><div class="docblock"><p>Gets the value of a capability.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.get_driver" class="method"><a class="src rightside" href="../src/drm/lib.rs.html#164-189">Source</a><h4 class="code-header">fn <a href="#method.get_driver" class="fn">get_driver</a>(&amp;self) -&gt; <a class="type" href="https://doc.rust-lang.org/nightly/std/io/error/type.Result.html" title="type std::io::error::Result">Result</a>&lt;<a class="struct" href="struct.Driver.html" title="struct drm::Driver">Driver</a>&gt;</h4></section></summary><div class="docblock"><h5 id="possible-errors"><a class="doc-anchor" href="#possible-errors">ยง</a>Possible errors:</h5>
<ul>
<li><code>EFAULT</code>: Kernel could not copy fields into userspace</li>
</ul>
</div></details><details class="toggle method-toggle" open><summary><section id="method.wait_vblank" class="method"><a class="src rightside" href="../src/drm/lib.rs.html#192-228">Source</a><h4 class="code-header">fn <a href="#method.wait_vblank" class="fn">wait_vblank</a>(
    &amp;self,
    target_sequence: <a class="enum" href="enum.VblankWaitTarget.html" title="enum drm::VblankWaitTarget">VblankWaitTarget</a>,
    flags: <a class="struct" href="struct.VblankWaitFlags.html" title="struct drm::VblankWaitFlags">VblankWaitFlags</a>,
    high_crtc: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u32.html">u32</a>,
    user_data: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>,
) -&gt; <a class="type" href="https://doc.rust-lang.org/nightly/std/io/error/type.Result.html" title="type std::io::error::Result">Result</a>&lt;<a class="struct" href="struct.VblankWaitReply.html" title="struct drm::VblankWaitReply">VblankWaitReply</a>&gt;</h4></section></summary><div class="docblock"><p>Waits for a vblank.</p>
</div></details></div><h2 id="implementors" class="section-header">Implementors<a href="#implementors" class="anchor">ยง</a></h2><div id="implementors-list"></div><script src="../trait.impl/drm/trait.Device.js" async></script></section></div></main></body></html>