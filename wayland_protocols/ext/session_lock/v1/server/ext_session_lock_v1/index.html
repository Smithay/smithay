<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="manage lock state and create lock surfaces"><title>wayland_protocols::ext::session_lock::v1::server::ext_session_lock_v1 - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2"href="../../../../../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../../../../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../../../../../static.files/rustdoc-e56847b5.css"><meta name="rustdoc-vars" data-root-path="../../../../../../" data-static-root-path="../../../../../../static.files/" data-current-crate="wayland_protocols" data-themes="" data-resource-suffix="" data-rustdoc-version="1.92.0-nightly (7ac0330c6 2025-09-25)" data-channel="nightly" data-search-js="search-e256b49e.js" data-stringdex-js="stringdex-061df703.js" data-settings-js="settings-c38705f0.js" ><script src="../../../../../../static.files/storage-e2aeef58.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../../../../../static.files/main-ce535bd0.js"></script><noscript><link rel="stylesheet" href="../../../../../../static.files/noscript-263c88ec.css"></noscript><link rel="alternate icon" type="image/png" href="../../../../../../static.files/favicon-32x32-eab170b8.png"><link rel="icon" type="image/svg+xml" href="../../../../../../static.files/favicon-044be391.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><rustdoc-topbar><h2><a href="#">Module ext_session_lock_v1</a></h2></rustdoc-topbar><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../../../../../wayland_protocols/index.html">wayland_<wbr>protocols</a><span class="version">0.32.9</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Module ext_<wbr>session_<wbr>lock_<wbr>v1</a></h2><h3><a href="#structs">Module Items</a></h3><ul class="block"><li><a href="#structs" title="Structs">Structs</a></li><li><a href="#enums" title="Enums">Enums</a></li><li><a href="#constants" title="Constants">Constants</a></li></ul></section><div id="rustdoc-modnav"><h2><a href="../index.html">In wayland_<wbr>protocols::<wbr>ext::<wbr>session_<wbr>lock::<wbr>v1::<wbr>server</a></h2></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../../../../../index.html">wayland_protocols</a>::<wbr><a href="../../../../index.html">ext</a>::<wbr><a href="../../../index.html">session_lock</a>::<wbr><a href="../../index.html">v1</a>::<wbr><a href="../index.html">server</a></div><h1>Module <span>ext_<wbr>session_<wbr>lock_<wbr>v1</span>&nbsp;<button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../../../../../src/wayland_protocols/ext.rs.html#34-37">Source</a> </span></div><span class="item-info"><div class="stab portability">Available on <strong>crate features <code>staging</code> and <code>server</code></strong> only.</div></span><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>manage lock state and create lock surfaces</p>
<p>In response to the creation of this object the compositor must send
either the locked or finished event.</p>
<p>The locked event indicates that the session is locked. This means
that the compositor must stop rendering and providing input to normal
clients. Instead the compositor must blank all outputs with an opaque
color such that their normal content is fully hidden.</p>
<p>The only surfaces that should be rendered while the session is locked
are the lock surfaces created through this interface and optionally,
at the compositor’s discretion, special privileged surfaces such as
input methods or portions of desktop shell UIs.</p>
<p>The locked event must not be sent until a new “locked” frame (either
from a session lock surface or the compositor blanking the output) has
been presented on all outputs and no security sensitive normal/unlocked
content is possibly visible.</p>
<p>The finished event should be sent immediately on creation of this
object if the compositor decides that the locked event will not be sent.</p>
<p>The compositor may wait for the client to create and render session lock
surfaces before sending the locked event to avoid displaying intermediate
blank frames. However, it must impose a reasonable time limit if
waiting and send the locked event as soon as the hard requirements
described above can be met if the time limit expires. Clients should
immediately create lock surfaces for all outputs on creation of this
object to make this possible.</p>
<p>This behavior of the locked event is required in order to prevent
possible race conditions with clients that wish to suspend the system
or similar after locking the session. Without these semantics, clients
triggering a suspend after receiving the locked event would race with
the first “locked” frame being presented and normal/unlocked frames
might be briefly visible as the system is resumed if the suspend
operation wins the race.</p>
<p>If the client dies while the session is locked, the compositor must not
unlock the session in response. It is acceptable for the session to be
permanently locked if this happens. The compositor may choose to continue
to display the lock surfaces the client had mapped before it died or
alternatively fall back to a solid color, this is compositor policy.</p>
<p>Compositors may also allow a secure way to recover the session, the
details of this are compositor policy. Compositors may allow a new
client to create a ext_session_lock_v1 object and take responsibility
for unlocking the session, they may even start a new lock client
instance automatically.</p>
</div></details><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><dl class="item-table"><dt><a class="struct" href="struct.ExtSessionLockV1.html" title="struct wayland_protocols::ext::session_lock::v1::server::ext_session_lock_v1::ExtSessionLockV1">ExtSession<wbr>Lock<wbr>V1</a></dt><dd>manage lock state and create lock surfaces</dd></dl><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">§</a></h2><dl class="item-table"><dt><a class="enum" href="enum.Error.html" title="enum wayland_protocols::ext::session_lock::v1::server::ext_session_lock_v1::Error">Error</a></dt><dt><a class="enum" href="enum.Event.html" title="enum wayland_protocols::ext::session_lock::v1::server::ext_session_lock_v1::Event">Event</a></dt><dt><a class="enum" href="enum.Request.html" title="enum wayland_protocols::ext::session_lock::v1::server::ext_session_lock_v1::Request">Request</a></dt></dl><h2 id="constants" class="section-header">Constants<a href="#constants" class="anchor">§</a></h2><dl class="item-table"><dt><a class="constant" href="constant.EVT_FINISHED_OPCODE.html" title="constant wayland_protocols::ext::session_lock::v1::server::ext_session_lock_v1::EVT_FINISHED_OPCODE">EVT_<wbr>FINISHED_<wbr>OPCODE</a></dt><dd>The wire opcode for this event</dd><dt><a class="constant" href="constant.EVT_FINISHED_SINCE.html" title="constant wayland_protocols::ext::session_lock::v1::server::ext_session_lock_v1::EVT_FINISHED_SINCE">EVT_<wbr>FINISHED_<wbr>SINCE</a></dt><dd>The minimal object version supporting this event</dd><dt><a class="constant" href="constant.EVT_LOCKED_OPCODE.html" title="constant wayland_protocols::ext::session_lock::v1::server::ext_session_lock_v1::EVT_LOCKED_OPCODE">EVT_<wbr>LOCKED_<wbr>OPCODE</a></dt><dd>The wire opcode for this event</dd><dt><a class="constant" href="constant.EVT_LOCKED_SINCE.html" title="constant wayland_protocols::ext::session_lock::v1::server::ext_session_lock_v1::EVT_LOCKED_SINCE">EVT_<wbr>LOCKED_<wbr>SINCE</a></dt><dd>The minimal object version supporting this event</dd><dt><a class="constant" href="constant.REQ_DESTROY_OPCODE.html" title="constant wayland_protocols::ext::session_lock::v1::server::ext_session_lock_v1::REQ_DESTROY_OPCODE">REQ_<wbr>DESTROY_<wbr>OPCODE</a></dt><dd>The wire opcode for this request</dd><dt><a class="constant" href="constant.REQ_DESTROY_SINCE.html" title="constant wayland_protocols::ext::session_lock::v1::server::ext_session_lock_v1::REQ_DESTROY_SINCE">REQ_<wbr>DESTROY_<wbr>SINCE</a></dt><dd>The minimal object version supporting this request</dd><dt><a class="constant" href="constant.REQ_GET_LOCK_SURFACE_OPCODE.html" title="constant wayland_protocols::ext::session_lock::v1::server::ext_session_lock_v1::REQ_GET_LOCK_SURFACE_OPCODE">REQ_<wbr>GET_<wbr>LOCK_<wbr>SURFACE_<wbr>OPCODE</a></dt><dd>The wire opcode for this request</dd><dt><a class="constant" href="constant.REQ_GET_LOCK_SURFACE_SINCE.html" title="constant wayland_protocols::ext::session_lock::v1::server::ext_session_lock_v1::REQ_GET_LOCK_SURFACE_SINCE">REQ_<wbr>GET_<wbr>LOCK_<wbr>SURFACE_<wbr>SINCE</a></dt><dd>The minimal object version supporting this request</dd><dt><a class="constant" href="constant.REQ_UNLOCK_AND_DESTROY_OPCODE.html" title="constant wayland_protocols::ext::session_lock::v1::server::ext_session_lock_v1::REQ_UNLOCK_AND_DESTROY_OPCODE">REQ_<wbr>UNLOCK_<wbr>AND_<wbr>DESTROY_<wbr>OPCODE</a></dt><dd>The wire opcode for this request</dd><dt><a class="constant" href="constant.REQ_UNLOCK_AND_DESTROY_SINCE.html" title="constant wayland_protocols::ext::session_lock::v1::server::ext_session_lock_v1::REQ_UNLOCK_AND_DESTROY_SINCE">REQ_<wbr>UNLOCK_<wbr>AND_<wbr>DESTROY_<wbr>SINCE</a></dt><dd>The minimal object version supporting this request</dd></dl></section></div></main></body></html>